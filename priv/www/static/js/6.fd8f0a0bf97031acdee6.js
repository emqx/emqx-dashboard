webpackJsonp([6],{GAgZ:function(e,t){},meNs:function(e,t){},y9l1:function(e,t){},zCPI:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("zL8q"),a=r("Dd8w"),n=r.n(a),o={name:"auth-username-table",components:{"el-dialog":s.Dialog,"el-input":s.Input,"el-button":s.Button,"el-table":s.Table,"el-table-column":s.TableColumn,"el-form":s.Form,"el-form-item":s.FormItem,"el-row":s.Row,"el-col":s.Col},data:function(){return{editVisible:!1,tableData:[],record:{},rules:{username:{required:!0,message:this.$t("plugins.usernameRequired")},password:{required:!0,message:this.$t("plugins.passwordRequired")}},editRecord:{}}},methods:{loadData:function(){var e=this;this.$httpGet("/auth_username").then(function(t){e.tableData=t.data.map(function(e){return{username:e}})}).catch(function(t){e.$message.error(t||e.$t("error.networkError"))})},save:function(){var e=this;this.$refs.record.validate(function(t){if(t){var r=n()({},e.record);e.$httpPost("/auth_username",r).then(function(){e.loadData(),e.$message.success(e.$t("success.createSuccess")),e.record={},e.$refs.record.resetFields()}).catch(function(t){e.$message.error(t||e.$t("error.networkError"))})}})},handleDelete:function(e,t,r){var s=this;this.$httpDelete("/auth_username/"+e.username).then(function(){s.loadData(),r.$refs["popover-"+t].doClose()}).catch(function(e){s.$message.error(e||s.$t("error.networkError"))})},showEdit:function(e){var t=this;this.editVisible=!0,this.$httpGet("/auth_username/"+e.username).then(function(e){t.editRecord=e.data}).catch(function(e){t.$message.error(e||t.$t("error.networkError"))})},handleEdit:function(){var e=this;this.$refs.editRecord.validate(function(t){if(t){var r={password:e.editRecord.password};e.$httpPut("/auth_username/"+e.editRecord.username,r).then(function(){e.loadData(),e.$message.success(e.$t("oper.editSuccess")),e.editRecord={},e.editVisible=!1,e.$refs.editRecord.resetFields()}).catch(function(t){e.$message.error(t||e.$t("error.networkError"))})}})}},created:function(){this.loadData()}},i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"auth-username-table"},[r("el-row",{attrs:{gutter:20}},[r("el-form",{ref:"record",attrs:{model:e.record,rules:e.rules},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save(t)}}},[r("el-col",{attrs:{span:5}},[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{size:"small",placeholder:"username"},model:{value:e.record.username,callback:function(t){e.$set(e.record,"username",t)},expression:"record.username"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:5}},[r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password",size:"small",placeholder:"password"},model:{value:e.record.password,callback:function(t){e.$set(e.record,"password",t)},expression:"record.password"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:2}},[r("el-button",{staticClass:"add",attrs:{type:"success",icon:"el-icon-plus",size:"small"},on:{click:e.save}},[e._v("\n          "+e._s(e.$t("oper.add"))+"\n        ")])],1)],1)],1),e._v(" "),r("el-table",{attrs:{border:"",data:e.tableData}},[r("el-table-column",{attrs:{prop:"username",label:"Username"}}),e._v(" "),r("el-table-column",{attrs:{width:"120px",label:e.$t("oper.oper")},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row,a=t.$index,n=t._self;return[r("el-button",{attrs:{size:"mini",type:"success",plain:""},on:{click:function(t){return e.showEdit(s)}}},[e._v("\n          "+e._s(e.$t("oper.edit"))+"\n        ")]),e._v(" "),r("el-popover",{ref:"popover-"+a,attrs:{placement:"right",trigger:"click"}},[r("p",[e._v(e._s(e.$t("oper.confirmDelete")))]),e._v(" "),r("div",{staticStyle:{"text-align":"right"}},[r("el-button",{staticClass:"cache-btn",attrs:{size:"mini",type:"text"},on:{click:function(e){n.$refs["popover-"+a].doClose()}}},[e._v("\n              "+e._s(e.$t("oper.cancel"))+"\n            ")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){return e.handleDelete(s,a,n)}}},[e._v("\n              "+e._s(e.$t("oper.confirm"))+"\n            ")])],1),e._v(" "),r("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",plain:""},slot:"reference"},[e._v("\n            "+e._s(e.$t("oper.delete"))+"\n          ")])],1)]}}])})],1),e._v(" "),r("el-dialog",{attrs:{visible:e.editVisible,width:"400px",title:e.$t("oper.edit")},on:{"update:visible":function(t){e.editVisible=t}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleEdit(t)}}},[r("el-form",{ref:"editRecord",staticClass:"el-form--public app-info",attrs:{size:"medium",rules:e.rules,model:e.editRecord}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{prop:"username",label:"Username"}},[r("el-input",{attrs:{disabled:"",type:"username"},model:{value:e.editRecord.username,callback:function(t){e.$set(e.editRecord,"username",t)},expression:"editRecord.username"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{prop:"password",label:"Password"}},[r("el-input",{attrs:{type:"password"},model:{value:e.editRecord.password,callback:function(t){e.$set(e.editRecord,"password",t)},expression:"editRecord.password"}})],1)],1)],1)],1),e._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{staticClass:"cache-btn",attrs:{type:"text"},on:{click:function(t){e.editVisible=!1}}},[e._v("\n        "+e._s(e.$t("oper.cancel"))+"\n      ")]),e._v(" "),r("el-button",{staticClass:"confirm-btn",attrs:{type:"success",loading:e.$store.state.loading,disabled:e.$store.state.loading},on:{click:e.handleEdit}},[e._v("\n        "+e._s(e.$t("oper.save"))+"\n      ")])],1)],1)],1)},staticRenderFns:[]};var l=r("VU/8")(o,i,!1,function(e){r("y9l1")},null,null).exports,c={name:"auth-clientid-table",components:{"el-dialog":s.Dialog,"el-input":s.Input,"el-button":s.Button,"el-table":s.Table,"el-table-column":s.TableColumn,"el-form":s.Form,"el-form-item":s.FormItem,"el-row":s.Row,"el-col":s.Col},data:function(){return{editVisible:!1,tableData:[],record:{},rules:{clientid:{required:!0,message:this.$t("plugins.clientidRequired")},password:{required:!0,message:this.$t("plugins.passwordRequired")}},editRecord:{}}},methods:{loadData:function(){var e=this;this.$httpGet("/auth_clientid").then(function(t){e.tableData=t.data.map(function(e){return{clientid:e}})}).catch(function(t){e.$message.error(t||e.$t("error.networkError"))})},save:function(){var e=this;this.$refs.record.validate(function(t){if(t){var r=n()({},e.record);e.$httpPost("/auth_clientid",r).then(function(){e.loadData(),e.$message.success(e.$t("success.createSuccess")),e.record={},e.$refs.record.resetFields()}).catch(function(t){e.$message.error(t||e.$t("error.networkError"))})}})},handleDelete:function(e,t,r){var s=this;this.$httpDelete("/auth_clientid/"+e.clientid).then(function(){s.loadData(),r.$refs["popover-"+t].doClose()}).catch(function(e){s.$message.error(e||s.$t("error.networkError"))})},showEdit:function(e){var t=this;this.editVisible=!0,this.$httpGet("/auth_clientid/"+e.clientid).then(function(e){t.editRecord=e.data}).catch(function(e){t.$message.error(e||t.$t("error.networkError"))})},handleEdit:function(){var e=this;this.$refs.editRecord.validate(function(t){if(t){var r={password:e.editRecord.password};e.$httpPut("/auth_clientid/"+e.editRecord.clientid,r).then(function(){e.loadData(),e.$message.success(e.$t("oper.editSuccess")),e.editRecord={},e.editVisible=!1,e.$refs.editRecord.resetFields()}).catch(function(t){e.$message.error(t||e.$t("error.networkError"))})}})}},created:function(){this.loadData()}},d={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"auth-clientid-table"},[r("el-row",{attrs:{gutter:20}},[r("el-form",{ref:"record",attrs:{model:e.record,rules:e.rules},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save(t)}}},[r("el-col",{attrs:{span:5}},[r("el-form-item",{attrs:{prop:"clientid"}},[r("el-input",{attrs:{size:"small",placeholder:"Client ID"},model:{value:e.record.clientid,callback:function(t){e.$set(e.record,"clientid",t)},expression:"record.clientid"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:5}},[r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password",size:"small",placeholder:"password"},model:{value:e.record.password,callback:function(t){e.$set(e.record,"password",t)},expression:"record.password"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:2}},[r("el-button",{staticClass:"add",attrs:{type:"success",icon:"el-icon-plus",size:"small"},on:{click:e.save}},[e._v("\n          "+e._s(e.$t("oper.add"))+"\n        ")])],1)],1)],1),e._v(" "),r("el-table",{attrs:{border:"",data:e.tableData}},[r("el-table-column",{attrs:{prop:"clientid",label:"Client ID"}}),e._v(" "),r("el-table-column",{attrs:{width:"120px",label:e.$t("oper.oper")},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row,a=t.$index,n=t._self;return[r("el-button",{attrs:{size:"mini",type:"success",plain:""},on:{click:function(t){return e.showEdit(s)}}},[e._v("\n          "+e._s(e.$t("oper.edit"))+"\n        ")]),e._v(" "),r("el-popover",{ref:"popover-"+a,attrs:{placement:"right",trigger:"click"}},[r("p",[e._v(e._s(e.$t("oper.confirmDelete")))]),e._v(" "),r("div",{staticStyle:{"text-align":"right"}},[r("el-button",{staticClass:"cache-btn",attrs:{size:"mini",type:"text"},on:{click:function(e){n.$refs["popover-"+a].doClose()}}},[e._v("\n              "+e._s(e.$t("oper.cancel"))+"\n            ")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){return e.handleDelete(s,a,n)}}},[e._v("\n              "+e._s(e.$t("oper.confirm"))+"\n            ")])],1),e._v(" "),r("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",plain:""},slot:"reference"},[e._v("\n            "+e._s(e.$t("oper.delete"))+"\n          ")])],1)]}}])})],1),e._v(" "),r("el-dialog",{attrs:{visible:e.editVisible,width:"400px",title:e.$t("oper.edit")},on:{"update:visible":function(t){e.editVisible=t}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleEdit(t)}}},[r("el-form",{ref:"editRecord",staticClass:"el-form--public app-info",attrs:{size:"medium",rules:e.rules,model:e.editRecord}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{prop:"clientid",label:"Client ID"}},[r("el-input",{attrs:{disabled:"",type:"clientid"},model:{value:e.editRecord.clientid,callback:function(t){e.$set(e.editRecord,"clientid",t)},expression:"editRecord.clientid"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{prop:"password",label:"Password"}},[r("el-input",{attrs:{type:"password"},model:{value:e.editRecord.password,callback:function(t){e.$set(e.editRecord,"password",t)},expression:"editRecord.password"}})],1)],1)],1)],1),e._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{staticClass:"cache-btn",attrs:{type:"text"},on:{click:function(t){e.editVisible=!1}}},[e._v("\n        "+e._s(e.$t("oper.cancel"))+"\n      ")]),e._v(" "),r("el-button",{staticClass:"confirm-btn",attrs:{type:"success",loading:e.$store.state.loading,disabled:e.$store.state.loading},on:{click:e.handleEdit}},[e._v("\n        "+e._s(e.$t("oper.save"))+"\n      ")])],1)],1)],1)},staticRenderFns:[]};var u=r("VU/8")(c,d,!1,function(e){r("GAgZ")},null,null).exports,p={name:"plugin-manage",components:{"el-breadcrumb":s.Breadcrumb,"el-breadcrumb-item":s.BreadcrumbItem,"el-card":s.Card,AuthUsernameTable:l,AuthClientIdTable:u},data:function(){return{pluginName:this.$route.params.pluginName}}},m={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"plugin-manage"},[r("div",{staticClass:"page-title"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/plugins"}}},[e._v(e._s(e.$t("leftbar.plugins")))]),e._v(" "),r("el-breadcrumb-item",{staticClass:"breadcrumb-name"},[e._v(e._s(e.pluginName))])],1)],1),e._v(" "),r("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.$store.state.loading,expression:"$store.state.loading"}],staticClass:"el-card--self"},["emqx_auth_username"===e.pluginName?[r("auth-username-table")]:e._e(),e._v(" "),"emqx_auth_clientid"===e.pluginName?[r("auth-clientId-table")]:e._e()],2)],1)},staticRenderFns:[]};var f=r("VU/8")(p,m,!1,function(e){r("meNs")},null,null);t.default=f.exports}});