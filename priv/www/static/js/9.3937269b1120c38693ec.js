webpackJsonp([9],{"7Qd9":function(e,t){},JWuK:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"rule-view",components:{RuleActions:r("eDC2").a},props:{},data:function(){return{id:this.$route.params.id,record:{name:"",for:"message.publish",rawsql:"",actions:[],description:""},rawSqlPlaceholder:'select payload from "tipic/1"',rules:{name:{required:!0},rawsql:{required:!0,message:this.$t("rule.sql_required")}}}},methods:{handleCreate:function(){var e=this;this.$refs.record&&this.$refs.record.validate(function(t){t&&(0!==e.record.actions.length?e.$httpPost("/rules",e.record).then(function(){e.$message.success(e.$t("rule.create_success")),e.$router.push("/rules")}):e.$message.error(e.$t("rule.actions_required")))})},loadData:function(){var e=this;0!==this.id&&"0"!==this.id&&this.$httpGet("/rules/"+this.id).then(function(t){e.record=t.data})},handleCancel:function(){this.$router.push("/rules")}},created:function(){this.loadData()},computed:{operationName:function(){var e=this.$route.query.oper,t=void 0===e?"view":e,r={view:this.$t("rule.view"),edit:this.$t("rule.edit"),create:this.$t("rule.create")};return"0"===this.id||0===this.id?r.create:r[t]}}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"rule-view"},[r("div",{staticClass:"page-title"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/rules"}}},[e._v("\n        "+e._s(e.$t("rule.message_rule"))+"\n      ")]),e._v(" "),r("el-breadcrumb-item",{staticClass:"breadcrumb-name"},[e._v("\n        "+e._s(e.operationName)+"\n      ")])],1)],1),e._v(" "),r("el-card",{staticClass:"el-card--self"},[r("el-form",{ref:"record",attrs:{"label-position":"left","label-width":"80px",model:e.record,rules:e.rules}},[r("div",{staticClass:"form-block--wrapper"},[r("div",{staticClass:"form-block__title"},[e._v("\n          "+e._s(e.$t("rule.conditional"))+"\n          "),r("div",{staticClass:"form-block__title-tips"},[e._v("\n            "+e._s(e.$t("rule.conditional_tips"))+"\n          ")])]),e._v(" "),r("div",{staticClass:"form-block__body"},[r("el-row",{staticStyle:{"max-width":"1366px"}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{prop:"name",label:e.$t("rule.name")}},[r("el-input",{attrs:{placeholder:e.$t("rule.rule_name_required")},model:{value:e.record.name,callback:function(t){e.$set(e.record,"name",t)},expression:"record.name"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"rawsql",label:e.$t("rule.rule_sql")}},[r("el-input",{attrs:{type:"textarea",rows:5,placeholder:e.rawSqlPlaceholder},model:{value:e.record.rawsql,callback:function(t){e.$set(e.record,"rawsql",t)},expression:"record.rawsql"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("rule.description")}},[r("el-input",{attrs:{type:"textarea",rows:4,placeholder:e.$t("rule.rule_descr_placeholder")},model:{value:e.record.description,callback:function(t){e.$set(e.record,"description",t)},expression:"record.description"}})],1)],1),e._v(" "),r("el-col",{staticClass:"sql-tips",attrs:{span:8,offset:1}},[r("div",{staticClass:"title"},[e._v("\n                "+e._s(e.$t("rule.rule_sql_tips_title"))+"\n              ")]),e._v(" "),r("div",{domProps:{innerHTML:e._s(e.$t("rule.sql_tips_html"))}})])],1)],1)]),e._v(" "),e._e(),e._v(" "),r("div",{staticClass:"form-block--wrapper",staticStyle:{clear:"both"}},[r("div",{staticClass:"form-block__title"},[r("span",{staticStyle:{color:"#ff6d6d"}},[e._v("*")]),e._v("\n          "+e._s(e.$t("rule.set_action"))+"\n          "),r("div",{staticClass:"form-block__title-tips"},[e._v("\n            "+e._s(e.$t("rule.actions_tips"))+"\n          ")])]),e._v(" "),r("div",{staticClass:"form-block__body"},[r("el-row",{staticStyle:{"max-width":"1366px"}},[r("el-col",{attrs:{span:12}},[r("rule-actions",{attrs:{operations:["create","delete"],record:e.record}})],1),e._v(" "),r("el-col",{staticClass:"sql-tips",attrs:{span:8,offset:1}},[r("div",{staticClass:"title"},[e._v("\n                "+e._s(e.$t("rule.rule_action_tips_title"))+"\n              ")]),e._v(" "),r("div",{domProps:{innerHTML:e._s(e.$t("rule.action_tips_html"))}})])],1)],1)])]),e._v(" "),r("div",[r("el-button",{staticClass:"confirm-btn",attrs:{type:"success"},on:{click:e.handleCreate}},[e._v("\n        "+e._s(e.$t("rule.create"))+"\n      ")]),e._v(" "),r("el-button",{staticClass:"cache-btn",attrs:{type:"text"},on:{click:e.handleCancel}},[e._v("\n        "+e._s(e.$t("rule.cancel"))+"\n      ")])],1)],1)],1)},staticRenderFns:[]};var a=r("VU/8")(s,l,!1,function(e){r("7Qd9")},null,null);t.default=a.exports}});